!function o(s,a,u){function l(t,e){if(!a[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=a[t]={exports:{}};s[t][0].call(i.exports,function(e){return l(s[t][1][e]||e)},i,i.exports,o,s,a,u)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,Backbone.View),n(s,[{key:"initialize",value:function(){LMDA&&LMDA.user&&LMDA.user.email&&this.$el.find("[name=email]").val(LMDA.user.email),this.showError=this.showError.bind(this),this.$el.on("submit",this.submitForm.bind(this))}},{key:"parseForm",value:function(){return this.$el.find(":input[type=text], :input[type=email], :input[type=hidden]").get().reduce(function(e,t){return t.name&&(e[t.name]=t.value),e},{})}},{key:"verifyField",value:function(e){switch($(e).attr("data-type")){case"email":if(!e.value)return this.showError("Пожалуйста, заполните поле",e),!1;if(!e.value.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/))return this.showError("Пожалуйста, введите действительный адрес электронной почты",e),!1}return!0}},{key:"verifyForm",value:function(){var r=this,n=!0;return this.$el.find(":input[data-type]").each(function(e,t){n&&(n=r.verifyField(t))}),n}},{key:"submitForm",value:function(e){var t=this;e.preventDefault(),this.verifyForm()&&(this.$el.attr("action"),this.parseForm(),$.post(this.$el.attr("action"),this.parseForm()).done(function(e){e?e.status.match(/ok/i)?t.showSuccess(e):t.showError(e):t.showError("Что-то пошло не так. Попробуйте еще раз позднее.")}).error(this.showError))}},{key:"showError",value:function(e,t){$(t).parent().addClass("field-error").find(".form__error").text(e).show()}},{key:"resetError",value:function(e){var t=e.currentTarget;$(t).parent().removeClass("field-error").find(".form__error").text("")}},{key:"showSuccess",value:function(e){}},{key:"events",get:function(){return{"focus [type=text]":"resetError"}}}]),s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e))}r.default=o},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,Backbone.View),n(s,[{key:"initialize",value:function(){this.listenTo(Backbone,"subscribe:success",this.headSubscribeSuccess.bind(this)),this.listenTo(Backbone,"black_mark_subscribe:success",this.subscribeSuccess.bind(this)),this.listenTo(Backbone,"black_mark_sku:fail",this.report.bind(this,"alert",{text:"артикул не участвует в акции",block:"black_mark",page_type:"bf2018"}))}},{key:"menuLinkClick",value:function(e){this.report("menu_click",{title:e.currentTarget.innerText,page_type:"bf2018"})}},{key:"subscribeSuccess",value:function(e){this.report("subscribe",{source:"bf2018",email:e.email,gender:e.gender,block:"black_mark"})}},{key:"headSubscribeSuccess",value:function(e){this.report("subscribe",{source:"bf2018",email:$(".lp-subscription__form [name=email]").val(),gender:$(".lp-subscription__form [name=gender]").val(),block:"header"})}},{key:"moreDiscountsClick",value:function(e){this.report("click",{action_type:{"tab-0":"more","tab-1":"play_game","tab-2":"play_game"}[e.currentTarget.getAttribute("for")],block:{"tab-0":"bonus","tab-1":"black_mark","tab-2":"game"}[e.currentTarget.getAttribute("for")],page_type:"bf2018"})}},{key:"report",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";LMDA.Statistics.report("bf2018",e,t)}},{key:"events",get:function(){return{"click .lp-bonus__button":this.report.bind(this,"click",{action_type:"open_catalog",block:"bonus",page_type:"bf2018"}),"click .lp-game__actions-button":this.report.bind(this,"click",{action_type:"open_catalog",block:"game",page_type:"bf2018"}),"click .lp-blacklabel__actions-button":this.report.bind(this,"click",{action_type:"open_catalog",block:"black_mark",page_type:"bf2018"}),"click .lp-blacklabel__form-submit":this.report.bind(this,"click",{action_type:"submit_sku",block:"black_mark",page_type:"bf2018"}),"click .lp-menu__link":"menuLinkClick","click .lp-awards-tab__link":"moreDiscountsClick","click .lp-share__button--vk":this.report.bind(this,"share",{page_type:"bf2018"}),"click .lp-share__button--fb":this.report.bind(this,"share",{page_type:"bf2018"})}}}]),s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e))}r.default=o},{}],3:[function(e,t,r){"use strict";var n,i=e("./quiz-view.js");new((n=i)&&n.__esModule?n:{default:n}).default({el:".js-quiz-block"})},{"./quiz-view.js":10}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,s=e("./quiz-model.js"),a=(o=s)&&o.__esModule?o:{default:o};var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,Backbone.Collection),n(l,[{key:"initialize",value:function(){this.listenTo(Backbone,"quiz-model:cahge",this.checkModels.bind(this))}},{key:"update",value:function(e){var t,r=this,n=[],i=[];if(e&&e.length){var o=!0,s=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;c=c.sort(function(){return.5-Math.random()}),i.push({sku1:c.pop(),sku2:c.pop()})}}catch(e){s=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw a}}this.add(i)}_.each(this.models,function(e,t){var r={};0==t&&(r={bestseller:1}),n.push(e.update(r))}),(t=$).when.apply(t,n).done(function(){r.trigger("collection:ready")})}},{key:"isReady",value:function(){var t=!0;return _(this.models).each(function(e){"ready"!=e.status&&(t=!1)}),t}},{key:"checkModels",value:function(){var t=!0;return _(this.models).each(function(e){e.get("answer")||(t=!1)}),t&&Backbone.trigger("game:over"),t}},{key:"model",get:function(){return a.default}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.currentStep=0,t}r.default=u},{"./quiz-model.js":5}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,Backbone.Model),n(s,[{key:"initialize",value:function(){this.on("change:answer",this.checkResult),this.reset=this.reset.bind(this)}},{key:"update",value:function(e){var t=Object.assign({sku1:this.get("sku1"),sku2:this.get("sku2")},e);return $.post("/blackfriday/preparequestions/",t,this.updateHandler.bind(this))}},{key:"updateHandler",value:function(e){e&&"OK"==e.status&&(this.set("products",e.products),this.set("status","ready"))}},{key:"checkResult",value:function(){var e=this.get("products"),t=this.get("answer"),r=this.get("sku1"),n=this.get("sku2");if(e&&e[r]){switch(this.get("step")){case 0:parseInt(e[r].purchase_count)>parseInt(e[n].purchase_count)?t==r?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):(this.set("result",!1),Backbone.trigger("quiz-model:rightanswer",t,!1)):parseInt(e[r].purchase_count)==parseInt(e[n].purchase_count)?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):t==n?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):(this.set("result",!1),Backbone.trigger("quiz-model:rightanswer",t,!1));break;case 1:parseInt(e[r].discount)>parseInt(e[n].discount)?t==r?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):(this.set("result",!1),Backbone.trigger("quiz-model:rightanswer",t,!1)):parseInt(e[r].discount)==parseInt(e[n].discount)?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):t==n?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):(this.set("result",!1),Backbone.trigger("quiz-model:rightanswer",t,!1));break;case 2:parseInt(e[r].price)>parseInt(e[n].price)?t==r?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):(this.set("result",!1),Backbone.trigger("quiz-model:rightanswer",t,!1)):parseInt(e[r].price)==parseInt(e[n].price)?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):t==n?(this.set("result",!0),Backbone.trigger("quiz-model:rightanswer",t,!0)):(this.set("result",!1),Backbone.trigger("quiz-model:rightanswer",t,!1))}Backbone.trigger("quiz-model:cahge",this)}}},{key:"reset",value:function(){this.clear().set(this.defaults)}},{key:"defaults",get:function(){return{sku1:"",sku2:"",step:0,products:{},status:"none",answer:"",result:null}}}]),s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e))}r.default=o},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,s=e("./lp-form.js");var a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,((o=s)&&o.__esModule?o:{default:o}).default),n(u,[{key:"showError",value:function(e,t){"desktop"==this.$el.data("factor")?function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(n):void 0}(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"showError",this).call(this,e,t):"string"==typeof e?$(".js-quiz-final-result-text").html(e):$(".js-quiz-final-result-text").html("Что-то пошло не так. Попробуйте еще раз позднее.")}},{key:"showSuccess",value:function(){$(".js-more-discounts").show(),$(".js-quiz-final-result-text").html("Поздравляем! На ваш e-mail придет письмо<br/>с промокодом на скидку 15%"),$(".js-quiz-form").hide(),$(".lp-promo-form__footer").show(),$(".lp-game__slider-button").removeClass("element-hidden"),Backbone.trigger("quiz_email:success")}}]),u);function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e))}r.default=a},{"./lp-form.js":1}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,Backbone.Model),n(s,[{key:"initialize",value:function(){this.listenTo(Backbone,"quiz-model:cahge",this.updateResult)}},{key:"reset",value:function(){this.clear({silent:!0}).set(this.defaults)}},{key:"updateResult",value:function(e){var t=this.get("steps");t[e.get("step")]=e.get("result"),this.set("steps",t),this.set("result",this.attributes.steps.every(function(e){return e})),this.trigger("change:result",this)}},{key:"defaults",get:function(){return{steps:[!1,!1,!1],result:null}}}]),s);function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e))}r.default=o},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,Backbone.View),n(s,[{key:"initialize",value:function(){this.listenTo(this.model,"change:result",this.setClass.bind(this))}},{key:"render",value:function(){return this.$el.html(this.template()),this.el}},{key:"setClass",value:function(e){var t=e.get("steps");for(var r in this.$(".lp-game__result").toggleClass("lp-game__result--success",this.model.get("result")),this.$(".lp-game__result").toggleClass("lp-game__result--fail",!this.model.get("result")),t)this.$(".lp-game__result-dot--"+(parseInt(r)+1)).toggleClass("lp-game__result-dot--success",t[r]);this.model.get("result")&&Backbone.trigger("quiz:success")}},{key:"restartQuiz",value:function(e){e&&e.preventDefault(),this.model.reset(),Backbone.trigger("quiz:restart")}},{key:"lookAnswers",value:function(){}},{key:"className",get:function(){return"lp-game__slide"}},{key:"events",get:function(){return{"click .js-game-restart":"restartQuiz","click .js-more-discounts":"restartQuiz"}}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.tagName="div",t.template=t.options.template,t}r.default=o},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,Backbone.View),n(s,[{key:"initialize",value:function(){this.listenTo(this.model,"change:result",this.showResult.bind(this)),this.listenTo(Backbone,"quiz:restart",this.model.reset),this.render=this.render.bind(this)}},{key:"render",value:function(){return this.$el.html(this.template(this.model.toJSON())),this.el}},{key:"slideChecked",value:function(e){this.model.get("answer")||this.model.set("answer",e.currentTarget.getAttribute("data-sku"))}},{key:"showResult",value:function(e){var t=e.toJSON();t&&t.products&&t.products[t.sku1]&&(t.result?(this.$el.find('[data-sku="'+t.answer+'"]').addClass("lp-game__slide-part--success"),this.setRsultText(this.$el.find('[data-sku="'+t.answer+'"] .js-quiz-result-text'),t.step,t.products[t.answer])):t.answer==t.sku1?(this.$el.find('[data-sku="'+t.sku2+'"]').addClass("lp-game__slide-part--success"),this.setRsultText(this.$el.find('[data-sku="'+t.sku2+'"] .js-quiz-result-text'),t.step,t.products[t.sku2])):(this.$el.find('[data-sku="'+t.sku1+'"]').addClass("lp-game__slide-part--success"),this.setRsultText(this.$el.find('[data-sku="'+t.sku1+'"] .js-quiz-result-text'),t.step,t.products[t.sku1])))}},{key:"setRsultText",value:function(e,t,r){var n="";switch(t){case 0:n="Этого товара было продано больше";break;case 1:n="Скидка на товар "+r.discount+" "+LMDA.country.currency;break;case 2:n="Цена товара "+r.price+" "+LMDA.country.currency}$(e).text(n)}},{key:"className",get:function(){return"lp-game__slide"}},{key:"events",get:function(){return{"click .lp-game__slide-part":"slideChecked"}}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.tagName="div",t.template=t.options.template,t}r.default=o},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=c(e("./quiz-steps-view.js")),s=c(e("./quiz-result-view.js")),a=c(e("./quiz-result-form-view.js")),u=c(e("./quiz-collection.js")),l=c(e("./quiz-result-model.js"));c(e("./lstat.js"));function c(e){return e&&e.__esModule?e:{default:e}}var p=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,Backbone.View),n(f,[{key:"initialize",value:function(){this.template=this.initTemplates(),this.skus=this.$("[name=quiz]").map(function(e,t){return[t.value.split(",")]}).get(),this.collection=new u.default,this.collection.update(this.skus),this.listenTo(this.collection,"collection:ready",this.render.bind(this)),this.listenTo(Backbone,"quiz-model:cahge",this.onAnswered.bind(this)),this.listenTo(Backbone,"quiz:restart",this.restartQuiz.bind(this)),this.listenTo(Backbone,"game:over",this.gameOver.bind(this)),this.$(".lp-game__slider-button--next").on("click",this.goNextStep.bind(this)),this.$(".lp-game__slider-button--prev").on("click",this.goPrevStep.bind(this)),this.quizResultModel||(window.quizResultModel=this.quizResultModel=new l.default),this.$el.addClass("lp-game-begining")}},{key:"initTemplates",value:function(){return _(this.$('[type="text/template"]')).reduce(function(e,t){return e[t.id]=_.template(t.innerText),e},{})}},{key:"render",value:function(){var n=this;this.$(".js-game-slider").empty(),_(this.collection.models).each(function(e,t){e.set("step",t);var r=new o.default({id:"qwiz-step-"+t,model:e,template:n.template.gameSlide}).render();n.$(".js-game-slider").append(r)});var e=new s.default({model:this.quizResultModel,template:this.template.gameResultSlide});this.$(".js-game-slider").append(e.render()),this.resultForm=new a.default({el:".js-quiz-form"})}},{key:"lookAnswers",value:function(){this.$(".lp-game").attr("data-step",2)}},{key:"goNextStep",value:function(){var e=parseInt(this.$(".lp-game").attr("data-step"))+1;this.$(".lp-game").attr("data-step",e)}},{key:"goPrevStep",value:function(){var e=parseInt(this.$(".lp-game").attr("data-step"))-1;this.$(".lp-game").attr("data-step",e)}},{key:"setStep",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;0<=e&&e<=3&&this.$(".lp-game").attr("data-step",e)}},{key:"onAnswered",value:function(e){var t=e.get("step");setTimeout(this.setStep.bind(this,t+1),500)}},{key:"restartQuiz",value:function(){this.$(".lp-game").attr("data-step",0),this.$(".lp-game__slider-button").addClass("element-hidden"),this.$el.addClass("lp-game-begining"),this.collection.reset(),this.collection.update(this.$("[name=quiz]").map(function(e,t){return[t.value.split(",")]}).get())}},{key:"gameOver",value:function(){this.$(".lp-game__slider-button").removeClass("element-hidden"),this.$el.removeClass("lp-game-begining")}},{key:"events",get:function(){return{"click .js-look-answers":"lookAnswers"}}}]),f);function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e))}r.default=p},{"./lstat.js":2,"./quiz-collection.js":4,"./quiz-result-form-view.js":6,"./quiz-result-model.js":7,"./quiz-result-view.js":8,"./quiz-steps-view.js":9}]},{},[3]);